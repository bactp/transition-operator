# propagationpolicy-update.yaml
apiVersion: transition.dcnlab.ssu.ac.kr/v1
kind: ClusterPolicy
metadata:
  name: clusterpolicy-sample
spec:
  clusterSelector:
    name: edge
    repo: http://192.168.28.151:31159/nephio/edge.git
    repoType: git
  selectMode: Specific # Specific, All
  transitionMode: Manual # Automatic, Manual
  packageSelectors:
    - name: wordpress
      packagePath: wordpress-app # where the package is in the repo
      packageType: Stateful # Stateless, Stateful
      selected: true
      backupInformation:
        - name: edge-backup # Backup Name
          backupType: Manual # Manual, Schedule
        - name: edge-wp-backup-every-5-min # Schedule Name
          backupType: Schedule # Manual, Schedule
  packageRetentionPolicy:
    retainOnSource: false
    deleteAfterTransition: true
  targetClusterPolicy:
    preferClusters:
      - name: core
        # repo: http://192.168.28.187:31969/nephio/core.git ## i think this might not be needed because we dont push the transitionresource to this repo
        repoType: git
        weight: 100
    # avoidClusters:
    #   - name: dev-local
    #     repo: http://192.168.28.187:31969/nephio/core.git
    #     repoType: git
